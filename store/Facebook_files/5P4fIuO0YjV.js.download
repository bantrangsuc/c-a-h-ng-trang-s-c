;/*FB_PKG_DELIM*/

__d("extractExifDataFromFiles",["FBLogger","Promise","cometUniqueID","getErrorSafe","processNewMediaAttachments"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e){try{a=Array.from(a);var f=a.map(function(a){var b=c("cometUniqueID")();a=a;a.uploadID=b;return a});return d("processNewMediaAttachments").extractLocationDataForPhotos(f).then(function(a){return{filesWithUploadID:f,locationDataMap:a}})["catch"](function(a){a=c("getErrorSafe")(a);c("FBLogger")("comet_composer").catching(a).warn("Failed to extract location data from uploaded media files in %s",e);return{filesWithUploadID:f,locationDataMap:new Map()}})}catch(d){a=c("getErrorSafe")(d);c("FBLogger")("comet_composer").catching(a).warn("Failed to process files for EXIF extraction in %s",e);return(h||(h=b("Promise"))).reject(a)}}g.extractExifDataFromFiles=a}),98);
__d("CometComposerFileDragDropAndPastePluginForLexical.react",["StoriesGating","cometIsMimeTypeForMedia","composerAttachmentAreaChecker","composerAttachmentAreaReducer","extractExifDataFromFiles","react-compiler-runtime","useCometLexicalFileDragAndDrop","useComposerViewStateDispatcher","useComposerViewStateReducer","withComposerViewStatePart"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=d("react-compiler-runtime").c(8),e=a.disableVideo;a=a.editor;var f=e===void 0?!1:e;c("useComposerViewStateReducer")(d("composerAttachmentAreaReducer").composerAttachmentAreaReducer,c("composerAttachmentAreaChecker"));var g=c("useComposerViewStateDispatcher")();b[0]!==f?(e=function(a){if(a.kind!=="file")return!1;return d("cometIsMimeTypeForMedia").isMimeTypeForPhoto(a.type)||!f&&d("cometIsMimeTypeForMedia").isMimeTypeForVideo(a.type)?!0:!1},b[0]=f,b[1]=e):e=b[1];e=e;var h;b[2]!==g?(h=function(a){a.length>0&&(g({attachmentType:"MEDIA",type:"ACTIVATE_ATTACHMENT_TYPE"}),d("StoriesGating").shouldEnableExifDataInLocationTagging()?d("extractExifDataFromFiles").extractExifDataFromFiles(Array.from(a),"CometComposerFileDragDropAndPastePluginForLexical").then(function(a){var b=a.filesWithUploadID;a=a.locationDataMap;g({files:b,type:"ADD_MEDIA_ATTACHMENT_ITEMS"});a.forEach(function(a,b){g({locationData:a,type:"UPDATE_PHOTO_LOCATION_DATA",uploadID:b})})})["catch"](function(b){g({files:a,type:"ADD_MEDIA_ATTACHMENT_ITEMS"})}):g({files:a,type:"ADD_MEDIA_ATTACHMENT_ITEMS"}))},b[2]=g,b[3]=h):h=b[3];h=h;var i;b[4]!==a||b[5]!==e||b[6]!==h?(i={editor:a,isMimeTypeAcceptable:e,onSubmit:h},b[4]=a,b[5]=e,b[6]=h,b[7]=i):i=b[7];c("useCometLexicalFileDragAndDrop")(i)}b=c("withComposerViewStatePart")(a,function(a){return{editor:a.lexicalEditor}});g["default"]=b}),98);