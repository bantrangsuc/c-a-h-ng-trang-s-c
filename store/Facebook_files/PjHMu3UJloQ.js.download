;/*FB_PKG_DELIM*/

__d("BaseMultiPageEntryPointImpl.react",["CometPlaceholder.react","CometRelay","clearTimeout","react","react-compiler-runtime","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useRef;function a(a){var b=d("react-compiler-runtime").c(15),e=a.entryPoint,f=a.environmentProvider,g=a.fallback,h=a.loadedEntryPoint,l=a.otherProps,m=a.placeholderComponent,n=a.preloadParams;a=a.usePlaceholder;m=m===void 0?c("CometPlaceholder.react"):m;a=a===void 0?!0:a;f=d("CometRelay").useEntryPointLoader(f,e);var o=f[0],p=f[1],q=f[2],r=o!=null?o:h,s=k(null);b[0]!==q||b[1]!==r.isDisposed||b[2]!==h||b[3]!==n||b[4]!==p||b[5]!==o?(e=function(){s.current!=null&&(c("clearTimeout")(s.current),s.current=null);r.isDisposed&&p(n);return function(){s.current=c("setTimeout")(function(){o?q():h.dispose(),s.current=null},6e4)}},f=[q,r.isDisposed,h,n,p,o],b[0]=q,b[1]=r.isDisposed,b[2]=h,b[3]=n,b[4]=p,b[5]=o,b[6]=e,b[7]=f):(e=b[6],f=b[7]);j(e,f);b[8]!==r||b[9]!==l?(e=i.jsx(d("CometRelay").EntryPointContainer,{entryPointReference:r,props:l}),b[8]=r,b[9]=l,b[10]=e):e=b[10];f=e;if(!a)return f;b[11]!==m||b[12]!==f||b[13]!==g?(l=i.jsx(m,{fallback:g,children:f}),b[11]=m,b[12]=f,b[13]=g,b[14]=l):l=b[14];return l}g["default"]=a}),98);
__d("FDSCheckmarkFilled20Icon",["cr:14115"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:14115")}),98);
__d("FDSCheckmarkFilled20PNGIcon.react",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("477814"),20);b=a;g["default"]=b}),98);
__d("LSIssueNewFireAndForgetTask",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.sequence([function(d){return c[1]=b.i64.to_string(a[1]),c[0]=b.i64.of_float(Date.now()),b.db.table(5).add({taskId:void 0,queueName:a[0],context:c[1],taskValue:a[2],enqueueTimestampMs:c[0]})},function(d){return b.filter(b.db.table(5).fetchDesc(),function(b){return b.queueName===a[0]&&b.context===c[1]&&b.taskValue===a[2]}).next().then(function(a,d){var e=a.done;a=a.value;return e?c[2]=b.i64.cast([-1,4294967295]):(d=a.item,c[2]=d.taskId)})}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSCoreIssueNewFireAndForgetTaskStoredProcedure";a.__tables__=["pending_fire_and_forget_tasks"];e.exports=a}),null);
__d("LSCheckThreadConsistency",["LSIssueNewFireAndForgetTask","LSIssueNewTask","gkx"],(function(a,b,c,d,e,f,g){function a(){var a=arguments,d=a[a.length-1],e=[],f=[];return d.sequence([function(f){return c("gkx")("15730")?(e[0]=new d.Map(),e[0].set("threads",a[0]),e[0].set("metadata",a[1]),e[1]=d.toJSON(e[0]),d.storedProcedure(b("LSIssueNewFireAndForgetTask"),"fire_forget",d.i64.cast([0,18]),e[1])):(e[0]=new d.Map(),e[0].set("threads",a[0]),e[0].set("metadata",a[1]),e[1]=d.toJSON(e[0]),d.storedProcedure(b("LSIssueNewTask"),"check-thread-consistency",d.i64.cast([0,160019]),e[1],void 0,void 0,d.i64.cast([0,0]),d.i64.cast([0,0]),void 0,void 0,d.i64.cast([0,0]),d.i64.cast([0,0])))},function(a){return d.resolve(f)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxCheckThreadConsistencyStoredProcedure";a.__tables__=[];d=a;g["default"]=d}),98);
__d("LSCheckThreadConsistencyStoredProcedure",["LSCheckThreadConsistency","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSCheckThreadConsistency"),e.threads,e.metadata);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWThreadConsistencyLogger",["FBLogger","I64","LSAuthorityLevel","LSCheckThreadConsistencyStoredProcedure","LSDatabaseSingleton","LSFactory","LSMessagingThreadTypeUtil","LSShape","LSVec","ODS","Promise","ReQL","WAArrayZip","asyncToGeneratorRuntime","clearInterval","gkx","justknobx","promiseDone","qex","setInterval"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=20,m=c("justknobx")._("3207"),n=!c("gkx")("5457"),o=!1,p=null;function a(){if(o||n)return;o=!0;c("clearInterval")(p);p=c("setInterval")(function(){if(document.visibilityState!=="visible")return;c("promiseDone")(q())},m*1e3)}function q(){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield (i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton);c("promiseDone")(a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){(k||(k=d("ODS"))).bumpEntityKey(3185,"maw_tc_metric","initiate_snapshot");var e=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableDescending(a.threads.index("lastActivityTimestampMs")).filter(s).take(l)));if(e.length===0){(k||(k=d("ODS"))).bumpEntityKey(3185,"maw_tc_metric","no_e2ee_threads_fetched_on_client");return}var f;c("qex")._("18")?f=(yield (h||(h=b("Promise"))).all(e.map(function(b){return d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.messages.index("messageDisplayOrderOfflineThreadingId")).getKeyRange(b.threadKey))}))):f=(yield (h||(h=b("Promise"))).all(e.map(function(b){return d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.messages.index("messageDisplayOrder")).getKeyRange(b.threadKey))})));e=d("WAArrayZip").zip(e,f).map(function(a){var b=a[0];a=a[1];return d("LSShape").ofRecord({is_last_activity_optimistic:t(a),last_activity_timestamp_ms:b.lastActivityTimestampMs,last_read_timestamp_ms:b.lastReadWatermarkTimestampMs,thread_key:b.threadKey})});return c("LSCheckThreadConsistencyStoredProcedure")(c("LSFactory")(a),{metadata:d("LSShape").ofRecord({client_snapshot_timestamp_ms:(j||(j=d("I64"))).of_float(Date.now()),session_timestamp_ms:j.of_int32(Math.round(window.performance.now()))}),threads:c("LSVec").ofArray(e)})});return function(b){return a.apply(this,arguments)}}(),"readonly",void 0,void 0,f.id+":59"),function(){return(k||(k=d("ODS"))).bumpEntityKey(3185,"maw_tc_metric","send_snapshot")},function(a){c("FBLogger")("maw_tc_metric").catching(a).warn("failed to send tc metric snapshot")})});return r.apply(this,arguments)}function s(a){return d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType)&&a.folderName==="inbox"&&(j||(j=d("I64"))).to_int32(a.authorityLevel)>=c("LSAuthorityLevel").AUTHORITATIVE}function t(a){return a==null?!1:(j||(j=d("I64"))).to_int32(a.authorityLevel)<c("LSAuthorityLevel").AUTHORITATIVE}g.startMAWThreadConsistencyLogger=a;g.MAWThreadConsistencyLoggerTakeSnapshot=q}),98);
__d("usePageEntryPointPrerenderer",["FBLogger","react","react-compiler-runtime","useCometEntryPointPrerendererWithQueryTimeoutPrivate"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.useState;function a(a,b,e){var f=d("react-compiler-runtime").c(6),g=i(),h=g[0],j=g[1];g=c("useCometEntryPointPrerendererWithQueryTimeoutPrivate")(a,b,e);var k=g[0];a=g[1];f[0]!==k?(b=function(a){var b=k();j(b);if(b==null){c("FBLogger")("comet_ui").blameToPreviousFrame().mustfix("Unable to present comet page EntryPoint component, preloadParams not set");return}b!=null&&a(b)},f[0]=k,f[1]=b):b=f[1];e=b;f[2]!==e||f[3]!==a||f[4]!==h?(g=[e,a,h],f[2]=e,f[3]=a,f[4]=h,f[5]=g):g=f[5];return g}g["default"]=a}),98);
__d("usePushPage",["BaseMultiPageEntryPointImpl.react","BaseMultiPageViewContext","FBLogger","react","react-compiler-runtime","useCometRelayEntrypointContextualEnvironmentProvider","usePageEntryPointPrerenderer"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useCallback;var j=b.useContext;function a(a,b,e){var f=d("react-compiler-runtime").c(9);e=e===void 0?"button":e;var g=c("useCometRelayEntrypointContextualEnvironmentProvider")(),h=j(c("BaseMultiPageViewContext"));e=c("usePageEntryPointPrerenderer")(a,b,e);var k=e[0];e=e[1];var l;f[0]!==h||f[1]!==g||f[2]!==k||f[3]!==a||f[4]!==b?(l=function(e,d){d=d===void 0?{}:d;var f=d.fallback,j=d.pageKey;if(h==null)throw c("FBLogger")("BaseMultiPageView").blameToPreviousFrame().mustfixThrow("usePushPage can only be used inside BaseMultiPageView.");if(b==null)return;k(function(d){return h.pushPage(function(){return i.jsx(c("BaseMultiPageEntryPointImpl.react"),{entryPoint:a,environmentProvider:g,fallback:f!=null?f:h.fallback,loadedEntryPoint:d,otherProps:e,placeholderComponent:h.placeholderComponent,preloadParams:b})},{pageKey:j})})},f[0]=h,f[1]=g,f[2]=k,f[3]=a,f[4]=b,f[5]=l):l=f[5];l=l;var m;f[6]!==e||f[7]!==l?(m=[l,e],f[6]=e,f[7]=l,f[8]=m):m=f[8];return m}g["default"]=a}),98);