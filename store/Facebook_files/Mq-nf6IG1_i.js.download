;/*FB_PKG_DELIM*/

__d("E2EEBackupSecretRestoreModule",["E2EEBackupCommon","Promise","QuickPerformanceLogger","VestaClient","VestaClientError","asyncToGeneratorRuntime","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("qpl")._(235874858,"168");function a(a,b,c){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){(i||(i=c("QuickPerformanceLogger"))).markerStart(j);i.markerAnnotate(j,{string:{product_use_case:e.productUseCase}});try{var g=(yield a.initLogin({clientId:e.clientId,productUseCase:e.productUseCase},f)),k=g.islandRsaPub,l=g.islandRsaPubSig,m=g.islandEd25519Pub,n=g.islandEd25519PubSig;g=g.isRegistered;(i||(i=c("QuickPerformanceLogger"))).markerPoint(j,"init_login_network_call");if(!g){(i||(i=c("QuickPerformanceLogger"))).markerAnnotate(j,{string:{failure_reason:"NOT_REGISTERED"}});i.markerEnd(j,3);throw new(d("E2EEBackupCommon").BackupError)(d("E2EEBackupCommon").BackupErrorType.NOT_REGISTERED)}g=(yield (h||(h=b("Promise"))).all([d("VestaClient").validateHsmKey(k,l),d("VestaClient").validateHsmKey(m,n)]));k=g[0];l=g[1];if(!k){(i||(i=c("QuickPerformanceLogger"))).markerAnnotate(j,{string:{failure_reason:"ISLAND_PUB_RSA_KEY_INVALID"}});i.markerEnd(j,3);throw new(d("E2EEBackupCommon").BackupError)(d("E2EEBackupCommon").BackupErrorType.ISLAND_PUB_RSA_KEY_INVALID)}if(!l){(i||(i=c("QuickPerformanceLogger"))).markerAnnotate(j,{string:{failure_reason:"ISLAND_PUB_ED25519_KEY_INVALID"}});i.markerEnd(j,3);throw new(d("E2EEBackupCommon").BackupError)(d("E2EEBackupCommon").BackupErrorType.ISLAND_PUB_ED25519_KEY_INVALID)}i.markerPoint(j,"verify_island_rsa_key");i.markerPoint(j,"verify_island_ed25519_key");n=e.vestaAccountPin;if(n==null)throw new(d("E2EEBackupCommon").BackupError)(d("E2EEBackupCommon").BackupErrorType.MISSING_PIN_INPUT);else{g=new TextEncoder();k=(yield d("VestaClient").beginLogin(g.encode(n)));l=k.clientState;g=k.l1Message;(i||(i=c("QuickPerformanceLogger"))).markerPoint(j,"begin_login_vesta_client");n=(yield a.beginLogin({clientId:e.clientId,productUseCase:e.productUseCase,opaqueL1:g},f));k=n.opaqueL2;g=n.opaqueL2Sig;i.markerPoint(j,"begin_login_network_call");n=(yield d("VestaClient").finishLogin(k,g,m,l));k=n.exportKey;g=n.l3Message;m=n.sessionKey;i.markerPoint(j,"finish_login_vesta_client");l=(yield a.finishLogin({clientId:e.clientId,productUseCase:e.productUseCase,opaqueL3:g},f));n=l.loginSuccess;a=l.loginPayload;i.markerPoint(j,"finish_login_network_call");if(!n){(i||(i=c("QuickPerformanceLogger"))).markerAnnotate(j,{string:{failure_reason:"VESTA_SERVER_ERROR"}});i.markerEnd(j,3);throw new(d("E2EEBackupCommon").BackupError)(d("E2EEBackupCommon").BackupErrorType.VESTA_SERVER_ERROR)}if(a!=null){e=(yield d("VestaClient").unpackLoginPayload(a,m,k));g=e.userSecret;(i||(i=c("QuickPerformanceLogger"))).markerPoint(j,"unpack_login_payload");i.markerEnd(j,2);return g}i.markerAnnotate(j,{string:{failure_reason:"VESTA_SERVER_ERROR"}});i.markerEnd(j,3);throw new(d("E2EEBackupCommon").BackupError)(d("E2EEBackupCommon").BackupErrorType.VESTA_SERVER_ERROR)}}catch(a){if(a instanceof d("E2EEBackupCommon").BackupError)throw a;else if(a instanceof c("VestaClientError")){(i||(i=c("QuickPerformanceLogger"))).markerAnnotate(j,{string:{failure_reason:"VestaClientException: "+a.name}});i.markerEnd(j,3);if(a.name==="InvalidUserPassword")throw new(d("E2EEBackupCommon").BackupError)(d("E2EEBackupCommon").BackupErrorType.INVALID_PASSWORD,a);throw new(d("E2EEBackupCommon").BackupError)(d("E2EEBackupCommon").BackupErrorType.VESTA_CLIENT_ERROR,a)}else{(i||(i=c("QuickPerformanceLogger"))).markerAnnotate(j,{string:{failure_reason:a.message}});i.markerEnd(j,3);throw new(d("E2EEBackupCommon").BackupError)(d("E2EEBackupCommon").BackupErrorType.NETWORK_PROVIDER_ERROR,a)}}});return k.apply(this,arguments)}g.restoreBackupSecret=a}),98);
__d("EOTRTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["OTC_ELIGIBLE_MOBILE","NO_MOBILE","UNTRUSTED_MOBILE"]);f.EOTRFlow=a}),66);
__d("MWChatEBPinCodeVerifyIndicator.react",["fbt","MWXRow.react","MWXRowItem.react","MWXSpinner.react","MWXText.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(5);a=a.isMessenger;a=a?"disabled_DEPRECATED":"blue";var e;b[0]!==a?(e=j.jsx(c("MWXRowItem.react"),{verticalAlign:"center",children:j.jsx(c("MWXSpinner.react"),{color:a,size:12})}),b[0]=a,b[1]=e):e=b[1];b[2]===Symbol["for"]("react.memo_cache_sentinel")?(a=j.jsx(c("MWXRowItem.react"),{verticalAlign:"center",children:j.jsx(c("MWXText.react"),{color:"secondary",testid:void 0,type:"meta3",children:h._(/*BTDS*/"\u0110ang x\u00e1c minh m\u00e3 PIN")})}),b[2]=a):a=b[2];b[3]!==e?(a=j.jsxs(c("MWXRow.react"),{align:"center",paddingTop:8,spacing:8,children:[e,a]}),b[3]=e,b[4]=a):a=b[4];return a}g["default"]=a}),226);
__d("MWChatEncryptedBackupsForgotPINDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="29657246047255053"}),null);
__d("MWChatEncryptedBackupsForgotPINDialogQuery$Parameters",["MWChatEncryptedBackupsForgotPINDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("MWChatEncryptedBackupsForgotPINDialogQuery_facebookRelayOperation"),metadata:{},name:"MWChatEncryptedBackupsForgotPINDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("MWChatEncryptedBackupsForgotPINDialog.entrypoint",["JSResourceForInteraction","MWChatEncryptedBackupsForgotPINDialogQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{queries:{queryReference:{parameters:c("MWChatEncryptedBackupsForgotPINDialogQuery$Parameters"),variables:{}}}}},root:c("JSResourceForInteraction")("MWChatEncryptedBackupsForgotPINDialog.react").__setRef("MWChatEncryptedBackupsForgotPINDialog.entrypoint")};g["default"]=a}),98);
__d("MWChatEncryptedBackupsForgotPinStepDialogPage.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{queries:{}}},root:c("JSResourceForInteraction")("MWChatEncryptedBackupsForgotPinStepDialogPage.react").__setRef("MWChatEncryptedBackupsForgotPinStepDialogPage.entrypoint")};g["default"]=a}),98);
__d("useEOTRPhaseTwoAndThree",["EOTRTypes","cr:10459","cr:10460"],(function(a,b,c,d,e,f,g){"use strict";function a(){return d("EOTRTypes").EOTRFlow.OTC_ELIGIBLE_MOBILE}f=(e=(c=b("cr:10459"))!=null?c:b("cr:10460"))!=null?e:a;g["default"]=f}),98);
__d("MWEncryptedBackupsForgotPinStep",["fbt","EOTRTypes","MAWEncryptedBackupsRestoreDialog.entrypoint","MWChatEncryptedBackupsForgotPINDialog.entrypoint","MWChatEncryptedBackupsForgotPinStepDialogPage.entrypoint","MWChatEncryptedBackupsQPLSource.enum","MWEBVirtualDevicesContext.react","MWJewelPopoverDialogContext.react","emptyFunction","qex","react","react-compiler-runtime","useEOTRPhaseTwoAndThree","useMWXEntryPointDialog","usePushPage"],(function(a,b,c,d,e,f,g,h){"use strict";var i=["onHighIntent"],j;j||(j=d("react"));var k=j.useContext,l=h._(/*BTDS*/"Qu\u00ean m\u00e3 PIN?"),m=h._(/*BTDS*/"B\u1ea1n c\u1ea7n tr\u1ee3 gi\u00fap?"),n="https://www.facebook.com/help/messenger-app/431055522328649?ref=learn_more";h=(f=(e=c("qex")._("3693"))!=null?e:c("qex")._("4656"))!=null?f:!1;var o={children:h?l:m,href:n,rel:"noreferrer",target:"_blank"};function a(a){var b=d("react-compiler-runtime").c(20),e=a.offlineDevicesCount,f=a.onClose,g=a.onComplete,h=a.pushPage;a=c("useEOTRPhaseTwoAndThree")();var j;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(j={},b[0]=j):j=b[0];j=c("usePushPage")(c("MWChatEncryptedBackupsForgotPinStepDialogPage.entrypoint"),j);var k=j[0];j=j[1];if(b[1]!==j){j.onHighIntent;var o=babelHelpers.objectWithoutPropertiesLoose(j,i);o=o;b[1]=j;b[2]=o}else o=b[2];b[3]===Symbol["for"]("react.memo_cache_sentinel")?(j={},b[3]=j):j=b[3];j=c("useMWXEntryPointDialog")(c("MAWEncryptedBackupsRestoreDialog.entrypoint"),j);var p=j[0];if(a===d("EOTRTypes").EOTRFlow.NO_MOBILE){b[4]!==p?(j={children:l,onClick:function(){p({onDismissUpsell:c("emptyFunction"),skipToForgotPINStep:!0,source:c("MWChatEncryptedBackupsQPLSource.enum").JEWEL_THREADLIST_QP})}},b[4]=p,b[5]=j):j=b[5];return j}else if(a===d("EOTRTypes").EOTRFlow.UNTRUSTED_MOBILE){b[6]!==p?(j={children:l,onClick:function(){p({onDismissUpsell:c("emptyFunction"),skipToForgotPINStep:!0,source:c("MWChatEncryptedBackupsQPLSource.enum").JEWEL_THREADLIST_QP})}},b[6]=p,b[7]=j):j=b[7];return j}var q=e>0;if(q){b[8]!==q||b[9]!==f||b[10]!==g||b[11]!==k||b[12]!==h?(a=function(){k({isRCDeviceEnabled:q,onClose:f,onComplete:g,pushPage:h},{})},b[8]=q,b[9]=f,b[10]=g,b[11]=k,b[12]=h,b[13]=a):a=b[13];b[14]!==o.onHoverIn||b[15]!==o.onHoverOut||b[16]!==o.onPressIn||b[17]!==a?(j={children:m,onClick:a,onHoverEnd:o.onHoverOut,onHoverStart:o.onHoverIn,onPressStart:o.onPressIn},b[14]=o.onHoverIn,b[15]=o.onHoverOut,b[16]=o.onPressIn,b[17]=a,b[18]=j):j=b[18];return j}else{b[19]===Symbol["for"]("react.memo_cache_sentinel")?(e={children:m,href:n,rel:"noreferrer",target:"_blank"},b[19]=e):e=b[19];return e}}function b(a){var b=d("react-compiler-runtime").c(18);a=a.onDismiss;var e=a===void 0?c("emptyFunction"):a;a=c("useEOTRPhaseTwoAndThree")();var f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f={},b[0]=f):f=b[0];f=c("useMWXEntryPointDialog")(c("MAWEncryptedBackupsRestoreDialog.entrypoint"),f);var g=f[0];f=d("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices();f=f.virtualDeviceInfo;f=f.offlineDevicesCount;var h=k(c("MWJewelPopoverDialogContext.react")),i=h.setIsOpenForDialog;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(h={},b[1]=h):h=b[1];h=c("useMWXEntryPointDialog")(c("MWChatEncryptedBackupsForgotPINDialog.entrypoint"),h);var j,n;b[2]!==h?(n=h[0],j=h.slice(1),b[2]=h,b[3]=j,b[4]=n):(j=b[3],n=b[4]);if(a===d("EOTRTypes").EOTRFlow.NO_MOBILE){b[5]!==g?(h={children:l,onClick:function(){g({onDismissUpsell:c("emptyFunction"),skipToForgotPINStep:!0,source:c("MWChatEncryptedBackupsQPLSource.enum").JEWEL_THREADLIST_QP})}},b[5]=g,b[6]=h):h=b[6];return h}else if(a===d("EOTRTypes").EOTRFlow.UNTRUSTED_MOBILE){b[7]!==g?(h={children:l,onClick:function(){g({onDismissUpsell:c("emptyFunction"),skipToForgotPINStep:!0,source:c("MWChatEncryptedBackupsQPLSource.enum").JEWEL_THREADLIST_QP})}},b[7]=g,b[8]=h):h=b[8];return h}a=f>0;if(a){h=j;f=h[0];a=h[1];j=h[2];b[9]!==e||b[10]!==i||b[11]!==n?(h=function(){i(!0),n({onDismiss:e})},b[9]=e,b[10]=i,b[11]=n,b[12]=h):h=b[12];var p;b[13]!==a||b[14]!==f||b[15]!==j||b[16]!==h?(p={children:m,onClick:h,onHoverEnd:a,onHoverStart:f,onPressStart:j},b[13]=a,b[14]=f,b[15]=j,b[16]=h,b[17]=p):p=b[17];return p}else return o}g.STATIC_HELP_CENTER_PROPS=o;g.useForgotPinLinkPushPageProps=a;g.useForgotPinLinkShowDialogProps=b}),226);
__d("MWChatEncryptedBackupsRestoreJewelForgotPinButtonSuspender.react",["MWEncryptedBackupsForgotPinStep","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=["children","href","onClick","onHoverEnd","onHoverStart","onPressStart","rel","target"],i;i||d("react");function a(a){var b=d("react-compiler-runtime").c(24),c=a.children;a=a.dismissSoftblock;var e;b[0]!==a?(e={onDismiss:a},b[0]=a,b[1]=e):e=b[1];a=d("MWEncryptedBackupsForgotPinStep").useForgotPinLinkShowDialogProps(e);var f,g,i,j,k,l,m,n;b[2]!==a?(e=a.children,g=a.href,i=a.onClick,j=a.onHoverEnd,k=a.onHoverStart,l=a.onPressStart,m=a.rel,n=a.target,f=babelHelpers.objectWithoutPropertiesLoose(a,h),b[2]=a,b[3]=f,b[4]=g,b[5]=e,b[6]=i,b[7]=j,b[8]=k,b[9]=l,b[10]=m,b[11]=n):(f=b[3],g=b[4],e=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11]);if(b[12]!==c||b[13]!==f||b[14]!==a||b[15]!==g||b[16]!==e||b[17]!==i||b[18]!==j||b[19]!==k||b[20]!==l||b[21]!==m||b[22]!==n){var o=babelHelpers["extends"]({},f,{label:e,linkProps:g!=null?{rel:m,target:n,url:g}:void 0,onHoverIn:k,onHoverOut:j,onPress:i,onPressIn:l});o=c({buttonProps:o,linkProps:a});b[12]=c;b[13]=f;b[14]=a;b[15]=g;b[16]=e;b[17]=i;b[18]=j;b[19]=k;b[20]=l;b[21]=m;b[22]=n;b[23]=o}else o=b[23];return o}g["default"]=a}),98);
__d("MWChatEncryptedBackupsSetIsDialogPersistedContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({setIsDialogPersisted:function(){}});g["default"]=b}),98);
__d("MWChatEncryptedBackupsSettingsDialogQuery.graphql",["MWChatEncryptedBackupsSettingsDialogQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:!1,kind:"LocalArgument",name:"labyrinthOnePointOneSecurityUX"}],c={alias:null,args:null,kind:"ScalarField",name:"has_seen_eb_auto_restore_notice",storageKey:null},d={alias:null,args:[{kind:"Literal",name:"family_device_id",value:""}],kind:"ScalarField",name:"has_otc_eligible_devices",storageKey:'has_otc_eligible_devices(family_device_id:"")'},e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWChatEncryptedBackupsSettingsDialogQuery",selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerDefaultEncryptedBackup",kind:"LinkedField",name:"messenger_default_encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"VestaGetUserInfoResponse",kind:"LinkedField",name:"vesta_user_info",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"useMWChatEncryptedBackupsVestaUserInfo_vestaGetUserInfoResponse"}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[c],storageKey:null}],storageKey:null},action:"THROW",path:"viewer"},{args:[{kind:"Variable",name:"labyrinthOnePointOneSecurityUX",variableName:"labyrinthOnePointOneSecurityUX"}],kind:"FragmentSpread",name:"MWChatEncryptedBackupsSettingsDialogStep_query"},{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"xfb_backup",plural:!1,selections:[d,{args:null,kind:"FragmentSpread",name:"useMWEncryptedBackupsGetVirtualDevicesPreloaded_xfbEncryptedBackup"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWChatEncryptedBackupsSettingsDialogQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerDefaultEncryptedBackup",kind:"LinkedField",name:"messenger_default_encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"VestaGetUserInfoResponse",kind:"LinkedField",name:"vesta_user_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"attempts_remaining",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_registered",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"login_timeout_remaining_secs",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[c,e],storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"backup_state",storageKey:null}]},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[f,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"encrypted_backup_encryption_management_delegator_id",storageKey:null}],type:"User",abstractKey:null},e],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"xfb_backup",plural:!1,selections:[f,e,{alias:null,args:null,kind:"ScalarField",name:"last_sync_time",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"backup_creation_time",storageKey:null},{condition:"labyrinthOnePointOneSecurityUX",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"allow_sender_backup",storageKey:null}]},d,{alias:null,args:null,concreteType:"XFBEBVirtualDevice",kind:"LinkedField",name:"virtual_devices",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_generated_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"device_type",storageKey:null},e],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"logout_whitelist",storageKey:null}]},params:{id:b("MWChatEncryptedBackupsSettingsDialogQuery_facebookRelayOperation"),metadata:{},name:"MWChatEncryptedBackupsSettingsDialogQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("MWEBOTCDialog.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{queries:{}}},root:c("JSResourceForInteraction")("MWEBOTCDialog.react").__setRef("MWEBOTCDialog.entrypoint")};g["default"]=a}),98);
__d("MWEBQPWithPinState.enum",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({INITIAL:0,RESTORE_IN_PROGRESS:1});c=a;f["default"]=c}),66);
__d("MWEBRestoreQPWithPin_viewer.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWEBRestoreQPWithPin_viewer",selections:[{alias:null,args:null,concreteType:"MessengerDefaultEncryptedBackup",kind:"LinkedField",name:"messenger_default_encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"VestaGetUserInfoResponse",kind:"LinkedField",name:"vesta_user_info",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"useMWChatEncryptedBackupsVestaUserInfo_vestaGetUserInfoResponse"}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_seen_eb_auto_restore_notice",storageKey:null}],storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"qp_with_pin_state",storageKey:null}]}],type:"Viewer",abstractKey:null};e.exports=a}),null);
__d("getMWEBRestoreQPCautionCircleProperties",["ix","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";var i=c("gkx")("23433");function a(){var a=i?h("414274"):h("1745665");return a}g["default"]=a}),98);
__d("useMWChatEncryptedBackupsAddDevice",["EBMainThreadEBDBApiDeferred","LSDataTraceCheckPoint","LSIntEnum","MAWTraceUtils","Promise","promiseDone","react","react-compiler-runtime","requireDeferred","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;e=j||d("react");e.useCallback;var k=e.useRef,l=e.useState,m=c("requireDeferred")("MAWEncryptedBackupsClearRecoveryCode").__setRef("useMWChatEncryptedBackupsAddDevice"),n=c("requireDeferred")("MWEncryptedBackupsFetchBackupIds").__setRef("useMWChatEncryptedBackupsAddDevice"),o=c("requireDeferred")("mwEBAddDevice").__setRef("useMWChatEncryptedBackupsAddDevice");function a(a){var e=d("react-compiler-runtime").c(12),f=a.environment,g=a.hsmFleetMigrationResetPIN,j=a.onComplete,s=a.onFailure,t=a.onInvalidRecoveryCode,u=a.onStart;a=l(!1);var v=a[0],w=a[1];e[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(){w(!1)},e[0]=a):a=e[0];var x=a,y=c("useAsyncReStore")(),z=k("");e[1]!==y||e[2]!==f||e[3]!==g||e[4]!==j||e[5]!==s||e[6]!==t||e[7]!==u?(a=function(a,e,k){z.current=k||"",c("promiseDone")((h||(h=b("Promise"))).all([y,m.load(),o.load().then(r),n.load()]),function(h){var k=h[0],b=h[1],l=h[2];h=h[3];b=b.encryptedBackupsClearRecoveryCode;var m=h.encryptedBackupsFetchBackupIds;return c("promiseDone")(b(k),function(){var b={onFailure:function(a){x(),s(a),e!=null&&d("MAWTraceUtils").recordFailureAndFlushForTraceId(e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_PIN_RESTORE_FAILURE),[],"Add Device Failure")},onInvalidRecoveryCode:function(){x(),t()},onStart:function(){w(!0),e!=null&&d("MAWTraceUtils").recordSuccessAndFlushForTraceId(e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_PLUGIN_CALLING_INITIALIZE_RESTORE),[]),u==null||u()},onSuccess:function(){c("promiseDone")(m(k)),x(),j(),g&&z.current!==""&&g(z.current)},recoveryCode:a,storage:k};return l(babelHelpers["extends"]({},b,{environment:f,traceId:d("MAWTraceUtils").stringToTraceId(e),trackAddingDevice:q,trackOverprompting:p}))})})},e[1]=y,e[2]=f,e[3]=g,e[4]=j,e[5]=s,e[6]=t,e[7]=u,e[8]=a):a=e[8];a=a;var A;e[9]!==v||e[10]!==a?(A=[a,v],e[9]=v,e[10]=a,e[11]=A):A=e[11];return A}function p(a){return d("EBMainThreadEBDBApiDeferred").trackOverprompting(a)}function q(){return d("EBMainThreadEBDBApiDeferred").addNewDevice()}function r(a){return a.EBAddDevice}g["default"]=a}),98);
__d("useMWChatEncryptedBackupsPinCodeRestore",["CometRelay","EBSMGatingUI","JSResourceForInteraction","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsSetIsDialogPersistedContext","MWEBODSEntityName.enum","MWEBPinCodeSize","MWEBUpsellDismissedEnum.facebook","MWEncryptedBackupsLocalStorageEntryEnum","QPLUserFlow","asyncToGeneratorRuntime","promiseDone","react","react-compiler-runtime","requireDeferred","useLabyrinthLogging","useMWChatEncryptedBackupsAddDevice","useMWChatEncryptedBackupsNumericCode","useMWEBFlowSourceContext","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;e=i||d("react");e.useCallback;var j=e.useContext,k=e.useEffect,l=e.useRef,m=e.useState,n=c("requireDeferred")("MWEBUseLocalStorage").__setRef("useMWChatEncryptedBackupsPinCodeRestore"),o=c("requireDeferred")("MWEncryptedBackupsSharedState").__setRef("useMWChatEncryptedBackupsPinCodeRestore"),p=c("requireDeferred")("mwEBGetPINSecretFromVesta").__setRef("useMWChatEncryptedBackupsPinCodeRestore"),q=c("requireDeferred")("updateUpsellsStateInRelayStore").__setRef("useMWChatEncryptedBackupsPinCodeRestore"),r=c("JSResourceForInteraction")("MWEncryptedBackupsHsmFleetMigrationGated").__setRef("useMWChatEncryptedBackupsPinCodeRestore");function a(a){var e=d("react-compiler-runtime").c(47),f=a.clientID,g=a.focusRegionId,i=a.onSubmitPin,t=a.onSubmitPinFailure,u=a.onVestaComplete,v=d("CometRelay").useRelayEnvironment();a=m(!1);var w=a[0],x=a[1];a=m(!1);var y=a[0],z=a[1];a=m(!1);var A=a[0],B=a[1],C=l(!1);a=d("useLabyrinthLogging").useLabyrinthLoggingFlow();var D=a.startFlow,E=(h||(h=c("useReStore")))(),F=c("useMWEBFlowSourceContext")();a=m(!1);var G=a[0],H=a[1],I=j(c("MWChatEncryptedBackupsSetIsDialogPersistedContext")).setIsDialogPersisted;e[0]!==E||e[1]!==v||e[2]!==D?(a=function(a){c("promiseDone")(r.load().then(function(b){b({db:E,environment:v,pinCode:a,startFlow:D})}))},e[0]=E,e[1]=v,e[2]=D,e[3]=a):a=e[3];a=a;var J;e[4]!==E||e[5]!==v||e[6]!==u?(J=function(){var a;c("QPLUserFlow").addPoint((a=d("MWChatEncryptedBackupsQPLEvents")).restoreDeviceAuthQplEvent,"add_device_success");c("QPLUserFlow").addPoint(a.restoreQplEvent,"restore_auth_finished_and_dismissed");o.onReady(function(a){a=a.upsertEBSharedStateEntry;c("promiseDone")(a({db:E,stateKey:c("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_RESTORED_SUCCESSFULLY}))});n.onReady(s);d("MWChatEncryptedBackupsLogging").endSuccess({annotations:{bool:{is_backend_setup:d("EBSMGatingUI").isBackendSetupSuccessfulForEBSM()}},event:a.restoreQplEvent});d("MWChatEncryptedBackupsLogging").endSuccess({event:a.restoreDeviceAuthQplEvent,odsEntityName:c("MWEBODSEntityName.enum").MW_EB_PIN_RESTORE_AUTH});u();H(!1);c("promiseDone")(q.load(),function(a){a({environment:v,updateValue:d("MWEBUpsellDismissedEnum.facebook").MWEBUpsellDismissedStateEnum.UPSELLS_DISMISSED})})},e[4]=E,e[5]=v,e[6]=u,e[7]=J):J=e[7];J=J;var K;e[8]!==v||e[9]!==t||e[10]!==I?(K=function(a){t==null||t(),C.current=!0,z(!0),H(!1),c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,a),d("MWChatEncryptedBackupsLogging").endFailure({errorName:a,event:d("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,odsEntityName:c("MWEBODSEntityName.enum").MW_EB_PIN_RESTORE_AUTH}),c("promiseDone")(q.load(),function(a){a({environment:v,updateValue:d("MWEBUpsellDismissedEnum.facebook").MWEBUpsellDismissedStateEnum.NOT_DISMISSED})}),I==null||I(!1)},e[8]=v,e[9]=t,e[10]=I,e[11]=K):K=e[11];K=K;var L;e[12]!==v||e[13]!==t||e[14]!==I?(L=function(){t==null||t(),C.current=!0,z(!0),H(!1),d("MWChatEncryptedBackupsLogging").endFailure({errorName:"pin_code_restore_wrong_recovery_code",event:d("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,odsEntityName:c("MWEBODSEntityName.enum").MW_EB_PIN_RESTORE_AUTH}),c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"pin_code_restore_wrong_recovery_code"),c("promiseDone")(q.load(),function(a){a({environment:v,updateValue:d("MWEBUpsellDismissedEnum.facebook").MWEBUpsellDismissedStateEnum.NOT_DISMISSED})}),I==null||I(!1)},e[12]=v,e[13]=t,e[14]=I,e[15]=L):L=e[15];L=L;var M;e[16]!==v||e[17]!==a||e[18]!==J||e[19]!==K||e[20]!==L?(M={environment:v,hsmFleetMigrationResetPIN:a,onComplete:J,onFailure:K,onInvalidRecoveryCode:L},e[16]=v,e[17]=a,e[18]=J,e[19]=K,e[20]=L,e[21]=M):M=e[21];a=c("useMWChatEncryptedBackupsAddDevice")(M);var N=a[0];e[22]===Symbol["for"]("react.memo_cache_sentinel")?(J=function(){z(!1),B(!1),x(!1)},e[22]=J):J=e[22];e[23]!==N||e[24]!==f||e[25]!==v||e[26]!==F||e[27]!==i||e[28]!==t||e[29]!==I||e[30]!==D?(K=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield p.load());yield b({addDevice:N,clientID:f,environment:v,getSourceFromContext:F,onSubmitPin:i,onSubmitPinFailure:t,onVestaSecretFetch:function(){I==null||I(!0)},pinCode:a,productUseCase:"MSGR_ENC_BACKUP",setIsInProgress:H,setIsPinCodeIncorrect:x,setIsVestaError:B,startFlow:D})});return function(b){return a.apply(this,arguments)}}(),e[23]=N,e[24]=f,e[25]=v,e[26]=F,e[27]=i,e[28]=t,e[29]=I,e[30]=D,e[31]=K):K=e[31];e[32]!==g||e[33]!==K?(L={enableMasking:!0,focusRegionId:g,inputSize:d("MWEBPinCodeSize").EB_PIN_CODE_SIZE,onChange:J,onComplete:K,type:"pin"},e[32]=g,e[33]=K,e[34]=L):L=e[34];M=d("useMWChatEncryptedBackupsNumericCode").useMWChatEncryptedBackupsNumericCode(L);a=M[0];J=M[1];var O=J.clearNumericInput;g=J.disabled;K=J.focusOnInput;L=J.invalidKeyPressedError;e[35]!==O?(M=function(){C.current&&(O(),C.current=!1)},J=[O],e[35]=O,e[36]=M,e[37]=J):(M=e[36],J=e[37]);k(M,J);M=g!=null?g:!1;e[38]!==K||e[39]!==a||e[40]!==L||e[41]!==G||e[42]!==y||e[43]!==w||e[44]!==A||e[45]!==M?(J={focusOnInput:K,inputProps:a,invalidKeyPressedError:L,isDisabled:M,isInProgress:G,isLabyrinthError:y,isPinCodeIncorrect:w,isVestaError:A},e[38]=K,e[39]=a,e[40]=L,e[41]=G,e[42]=y,e[43]=w,e[44]=A,e[45]=M,e[46]=J):J=e[46];return J}function s(a){var b=a.mwEBCreateLocalStorageEntry;a=a.mwEBDeleteLocalStorageEntry;b(c("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_RESTORED_IN_CURRENT_SESSION);b(c("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_RESTORED_IN_CURRENT_SESSION_2);a(c("MWEncryptedBackupsLocalStorageEntryEnum").EBSM_CORRUPTION_WIPE)}g.useMWChatEncryptedBackupsPinCodeRestore=a}),98);
__d("MWEBRestoreQPWithPin.react",["fbt","CometPlaceholder.react","CometRelay","CometVisualCompletionAttributes","EncryptedBackupsSupportedPlatformUtils","FBLogger","FocusRegion.react","JSResourceForInteraction","MWChatEBPinCodeVerifyIndicator.react","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsNumericCodeErrorWrapper.react","MWChatEncryptedBackupsNumericCodeInput.react","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsQPLSource.enum","MWChatEncryptedBackupsRestoreJewelForgotPinButtonSuspender.react","MWEBFlowSourceContextProvider.react","MWEBOTCDialog.entrypoint","MWEBQPWithPinState.enum","MWEBRestoreQPWithPin_viewer.graphql","MWEncryptedBackupsForgotPinStep","MWEncryptedBackupsRetrieveQplLoggingAnnotations","MWJewelPopoverDialogContext.react","MWLogInboxFiltersInteraction","MWLogInteraction","MWXCircleButton.react","MWXColumn.react","MWXColumnItem.react","MWXIconCross","MWXImage.react","MWXLink.react","MWXRow.react","MWXRowItem.react","MWXText.react","QPLUserFlow","cr:6334","cr:6335","focusScopeQueries","getMWEBRestoreQPCautionCircleProperties","gkx","promiseDone","react","react-compiler-runtime","useAsyncReStore","useLabyrinthLogging","useMWChatEncryptedBackupsPinCodeRestore","useMWChatEncryptedBackupsVestaUserInfo","useMWEBFlowSourceContext","useMWXEntryPointDialog","useMWXLazyDialog","useVisibilityObserver"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));e=j;var l=e.useCallback,m=e.useContext,n=e.useEffect,o=e.useMemo,p=e.useRef,q=e.useState,r=c("JSResourceForInteraction")("MWChatEncryptedBackupsPinCodeBlockedDialog.react").__setRef("MWEBRestoreQPWithPin.react"),s="chat-encrypted-backups-jewel-qp-with-pin-input",t={icon:{paddingTop:"x889kno",$$css:!0}};function u(a){var e,f,g=a.clientID,j=a.doesUserHaveOtcEligibleDevices,u=a.fragmentKey,v=a.isInbox,w=a.setClosed,x=a.setDismissed,y=d("CometRelay").useFragment(i!==void 0?i:i=b("MWEBRestoreQPWithPin_viewer.graphql"),u),z=d("CometRelay").useRelayEnvironment(),A=l(function(a){return d("CometRelay").commitLocalUpdate(z,function(b){b=b.getRoot().getLinkedRecord("viewer");if(b==null){c("FBLogger")("labyrinth_web").mustfix("[labyrinth][jewel_softblock_state] A viewer record does not exist when propagating EB restore qp with pin state");return}b.setValue(a,"qp_with_pin_state")})},[z]);a=y==null||(e=y.messenger_default_encrypted_backup)==null?void 0:e.vesta_user_info;var B=c("useMWChatEncryptedBackupsVestaUserInfo")({vestaGetUserInfoResponse$key:a}),C=B.attemptsRemaining===0||B.loginTimeoutRemainingSecs!=null;u=q(!1);var D=u[0],E=u[1],F=p(!1);a=c("useMWXLazyDialog")(r);var G=a[0];n(function(){C&&D===!0&&F.current!==!0&&(F.current=!0,G({attemptsRemaining:B.attemptsRemaining,loginTimeoutRemainingSecs:B.loginTimeoutRemainingSecs,onDismiss:function(){}}))},[C,G,D,B.attemptsRemaining,B.loginTimeoutRemainingSecs]);u=d("useLabyrinthLogging").useLabyrinthLoggingFlow();var H=u.startFlow,I=c("useAsyncReStore")(),J=c("useMWEBFlowSourceContext")(),K=o(function(){return J()},[J]),L=l(function(a){c("promiseDone")(I.then(function(b){d("MWEncryptedBackupsRetrieveQplLoggingAnnotations").encryptedBackupsRetrieveQplLoggingAnnotations({db:b,onFetch:function(b){var e=b.ebsmWiped,f=b.firstUpsellTime,g=b.hasEbKeysLocally,h=b.hasEBSM,i=b.hasPDB,k=b.hasUserRestoredBefore;b=b.hasUserRestoredBeforeTemp;H({additionalAnnotations:{eb_session_identifier:f,ebsm_wiped:e,has_eb_keys_locally:g,has_ebsm:h,has_pdb:i,has_user_restored_before:k,has_user_restored_before_temp:b,is_otc_eligible:j.toString(),is_pin_set:"true",restore_upsell_first_impression_time:f},event:d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,source:K});c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,a)}})}))},[I,H,j,K]);a=l(function(){var a=v?"RESTORE_QP_WITH_PIN_INBOX_DISMISSED":"RESTORE_QP_WITH_PIN_JEWEL_DISMISSED";L(a);d("MWChatEncryptedBackupsLogging").cancelFlow({cancelEndPoint:"thread_list_qp_with_pin",event:d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent});w();x()},[v,w,x,L]);u=m(c("MWJewelPopoverDialogContext.react"));var M=u.setIsOpenForDialog,N=b("cr:6334")==null?void 0:b("cr:6334")(),O=b("cr:6335")==null?void 0:b("cr:6335")();u=l(function(){w();if(N!=null)N(K);else if(O!=null){var a,b;O({hasSeenNotice:(a=y==null||(b=y.encrypted_backup)==null?void 0:b.has_seen_eb_auto_restore_notice)!=null?a:!1,source:K})}M(!0);A(c("MWEBQPWithPinState.enum").INITIAL)},[w,N,O,A,K,M,y==null||(f=y.encrypted_backup)==null?void 0:f.has_seen_eb_auto_restore_notice]);g=d("useMWChatEncryptedBackupsPinCodeRestore").useMWChatEncryptedBackupsPinCodeRestore({clientID:g,focusRegionId:s,onSubmitPin:function(){E(!0),d("MWLogInteraction").logPopoverOpenCancel("initiate_restore"),d("MWLogInboxFiltersInteraction").logInboxFiltersNavigationCancel("initiate_restore"),A(c("MWEBQPWithPinState.enum").RESTORE_IN_PROGRESS)},onSubmitPinFailure:function(){A(c("MWEBQPWithPinState.enum").INITIAL)},onVestaComplete:u});u=g.inputProps;var P=g.invalidKeyPressedError,Q=g.isInProgress,R=g.isLabyrinthError,S=g.isPinCodeIncorrect;g=g.isVestaError;Q=(y==null?void 0:y.qp_with_pin_state)===c("MWEBQPWithPinState.enum").RESTORE_IN_PROGRESS||Q;var T=c("useVisibilityObserver")({onVisible:function(){d("FocusRegion.react").focusRegionById(s,d("focusScopeQueries").tabbableScopeQuery);var a=v?"RESTORE_QP_WITH_PIN_INBOX_IMPRESSION":"RESTORE_QP_WITH_PIN_JEWEL_IMPRESSION";L(a)}}),U=c("useMWXEntryPointDialog")(c("MWEBOTCDialog.entrypoint"),{}),V=U[0],W=l(function(){V({source:v?c("MWChatEncryptedBackupsQPLSource.enum").INBOX_THREADLIST_QP:c("MWChatEncryptedBackupsQPLSource.enum").JEWEL_THREADLIST_QP},function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_CLOSE_DIALOG_CLICK")})},[v,V]);U=P!=null?P:S?h._(/*BTDS*/"Sai m\u00e3 PIN. H\u00e3y th\u1eed l\u1ea1i."):R||g?h._(/*BTDS*/"\u0110\u00e3 x\u1ea3y ra l\u1ed7i khi d\u00f9ng M\u00e3 PIN, vui l\u00f2ng th\u1eed l\u1ea1i"):void 0;if(C===!0){w();return null}P=c("gkx")("23219");return k.jsx("div",babelHelpers["extends"]({},{0:{className:"xlhe6ec x1obq294 x5a5i1n xde0f50 x15x8krk xe4pinz x14vqqas x1ys307a xod5an3 xyqm7xq xz9dl7a xpdmqnj xsag5q8 x1g0dm76"},1:{className:"x1obq294 x5a5i1n xde0f50 x15x8krk xe4pinz x14vqqas x1ys307a xod5an3 xyqm7xq xz9dl7a xpdmqnj xsag5q8 x1g0dm76 x1jx94hy"}}[!!P<<0],{children:k.jsxs(c("MWXColumn.react"),{ref:T,testid:void 0,children:[k.jsx(c("MWXColumnItem.react"),{children:k.jsxs(c("MWXRow.react"),{paddingHorizontal:0,paddingVertical:0,spacing:12,children:[k.jsx(c("MWXRowItem.react"),{xstyle:t.icon,children:k.jsx(c("MWXImage.react"),{src:c("getMWEBRestoreQPCautionCircleProperties")()})}),k.jsx(c("MWXRowItem.react"),{expanding:!0,children:k.jsxs(c("MWXColumn.react"),{paddingTop:8,spacing:12,children:[k.jsx(c("MWXColumnItem.react"),{children:k.jsx(c("MWXText.react"),{align:"start",numberOfLines:2,type:"headlineEmphasized4",children:h._(/*BTDS*/"Thi\u1ebfu l\u1ecbch s\u1eed chat")})}),k.jsx(c("MWXColumnItem.react"),{children:k.jsx(c("MWXText.react"),{align:"start",color:P?"secondary":"primary",numberOfLines:2,type:"body4",children:h._(/*BTDS*/"Nh\u1eadp m\u00e3 PIN \u0111\u1ec3 kh\u00f4i ph\u1ee5c l\u1ecbch s\u1eed chat.")})})]})}),k.jsx(c("MWXRowItem.react"),{children:k.jsx(c("MWXCircleButton.react"),{color:"primary",icon:c("MWXIconCross"),label:h._(/*BTDS*/"\u0110\u00f3ng"),onPress:a,size:P?24:32,testid:void 0})})]})}),k.jsx(c("MWXColumnItem.react"),{paddingTop:16,children:k.jsx(c("MWChatEncryptedBackupsNumericCodeErrorWrapper.react"),{error:U,inputSize:"small",children:k.jsx(d("FocusRegion.react").FocusRegion,{autoFocusQuery:d("focusScopeQueries").tabbableScopeQuery,id:s,children:k.jsx(c("MWChatEncryptedBackupsNumericCodeInput.react"),babelHelpers["extends"]({},u,{color:P?"primary":"secondary",disabled:Q,inputSize:"small",testid:void 0}))})})}),Q&&k.jsx(c("MWXColumnItem.react"),{align:"center",children:k.jsx("div",babelHelpers["extends"]({className:"xfitlp5 x9otpla"},{children:k.jsx(c("MWChatEBPinCodeVerifyIndicator.react"),{isMessenger:P})}))}),!Q&&k.jsx(c("MWXColumnItem.react"),{align:"center",children:k.jsx("div",babelHelpers["extends"]({},{0:{},2:{className:"xod5an3"},1:{className:"x12nagc x1iorvi4"},3:{className:"x12nagc x1iorvi4"}}[!!(U==null)<<1|!!(U!=null)<<0],{children:k.jsx(c("MWXText.react"),{color:"blueLink",type:"bodyLink4",children:j===!0?k.jsx(c("MWXLink.react"),{onClick:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_USE_ONE_TIME_CODE_CLICK"),M(!0),W()},children:h._(/*BTDS*/"S\u1eed d\u1ee5ng m\u00e3 d\u00f9ng m\u1ed9t l\u1ea7n")}):k.jsx("div",babelHelpers["extends"]({},c("CometVisualCompletionAttributes").IGNORE,{children:k.jsx(c("CometPlaceholder.react"),{fallback:k.jsx(c("MWXLink.react"),babelHelpers["extends"]({},d("MWEncryptedBackupsForgotPinStep").STATIC_HELP_CENTER_PROPS,{onClick:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_FORGOT_PIN_CLICK"),c("FBLogger")("labyrinth_web").tags(["jewel_restore_qp"]).warn("User clicked on the placeholder Forgot PIN button")}})),children:k.jsx(c("MWChatEncryptedBackupsRestoreJewelForgotPinButtonSuspender.react"),{children:function(a){var b=a.linkProps;return k.jsx(c("MWXLink.react"),babelHelpers["extends"]({},b,{onClick:function(a){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_FORGOT_PIN_CLICK"),b.onClick==null||b.onClick(a)}}))}})})}))})}))})]})}))}u.displayName=u.name+" [from "+f.id+"]";function a(a){var b=d("react-compiler-runtime").c(10),e=a.clientID,f=a.currentSupportedPlatform,g=a.doesUserHaveOtcEligibleDevices,h=a.fragmentKey,i=a.setClosed;a=a.setDismissed;f=f!==d("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.FACEBOOK_DOT_COM;var j=f?c("MWChatEncryptedBackupsQPLSource.enum").INBOX_THREADLIST_QP_WITH_PIN:c("MWChatEncryptedBackupsQPLSource.enum").JEWEL_THREADLIST_QP_WITH_PIN,l;b[0]!==e||b[1]!==g||b[2]!==h||b[3]!==f||b[4]!==i||b[5]!==a?(l=k.jsx(u,{clientID:e,doesUserHaveOtcEligibleDevices:g,fragmentKey:h,isInbox:f,setClosed:i,setDismissed:a}),b[0]=e,b[1]=g,b[2]=h,b[3]=f,b[4]=i,b[5]=a,b[6]=l):l=b[6];b[7]!==j||b[8]!==l?(e=k.jsx(c("MWEBFlowSourceContextProvider.react"),{source:j,children:l}),b[7]=j,b[8]=l,b[9]=e):e=b[9];return e}g["default"]=a}),226);
__d("MWEncryptedBackupsThreadListPersistentBanner.react",["fbt","EncryptedBackupsSupportedPlatformUtils","MAWEncryptedBackupsRestoreDialog.entrypoint","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsQPLSource.enum","MWEncryptedBackupsRetrieveQplLoggingAnnotations","MWJewelPopoverDialogContext.react","MWXLink.react","MWXText.react","QPLUserFlow","promiseDone","react","react-compiler-runtime","requireDeferred","useLabyrinthLogging","useMWXEntryPointDialog","useReStore","useVisibilityObserver"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));b=j;var l=b.useContext,m=b.useRef,n=c("requireDeferred")("mwEBCheckIfEBKeysExistInDisk").__setRef("MWEncryptedBackupsThreadListPersistentBanner.react");function a(a){var b=d("react-compiler-runtime").c(23),e=a.onDismissUpsell;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a={},b[0]=a):a=b[0];a=c("useMWXEntryPointDialog")(c("MAWEncryptedBackupsRestoreDialog.entrypoint"),a);var f=a[0];a=d("EncryptedBackupsSupportedPlatformUtils").useMWEncryptedBackupsGetCurrentSupportedPlatform();var g=a!==d("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.FACEBOOK_DOT_COM;a=l(c("MWJewelPopoverDialogContext.react"));var j=a.setIsOpenForDialog,o=(i||(i=c("useReStore")))();a=d("useLabyrinthLogging").useLabyrinthLoggingFlow();var p=a.startFlow,q=m(!1),r=g?c("MWChatEncryptedBackupsQPLSource.enum").INBOX_THREADLIST_PERSISTENT_BANNER:c("MWChatEncryptedBackupsQPLSource.enum").JEWEL_THREADLIST_PERSISTENT_BANNER;b[1]!==o||b[2]!==r||b[3]!==p?(a=function(a){d("MWEncryptedBackupsRetrieveQplLoggingAnnotations").encryptedBackupsRetrieveQplLoggingAnnotations({db:o,onFetch:function(b){var e=b.ebsmWiped,f=b.firstUpsellTime,g=b.hasEbKeysLocally,h=b.hasEBSM,i=b.hasPDB,j=b.hasUserRestoredBefore;b=b.hasUserRestoredBeforeTemp;p({additionalAnnotations:{eb_session_identifier:f,ebsm_wiped:e,has_eb_keys_locally:g,has_ebsm:h,has_pdb:i,has_user_restored_before:j,has_user_restored_before_temp:b,restore_upsell_first_impression_time:f},event:d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,source:r});c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,a);q.current===!1&&(q.current=!0,c("promiseDone")(n.load(),function(a){return a(g)}))}})},b[1]=o,b[2]=r,b[3]=p,b[4]=a):a=b[4];var s=a;b[5]!==g||b[6]!==s?(a={onVisible:function(){s(g?"RESTORE_THREAD_LIST_PERSISTENT_BANNER_IMPRESSION_INBOX":"RESTORE_THREAD_LIST_PERSISTENT_BANNER_IMPRESSION")}},b[5]=g,b[6]=s,b[7]=a):a=b[7];a=c("useVisibilityObserver")(a);var t;b[8]===Symbol["for"]("react.memo_cache_sentinel")?(t={className:"xlhe6ec x1obq294 x5a5i1n xde0f50 x15x8krk x1xmf6yo x1e56ztr xyqm7xq x1ys307a x6ikm8r x10wlt62 xyamay9 x1l90r2v xf7dkkf xv54qhq x1qh3cfz"},b[8]=t):t=b[8];var u;b[9]===Symbol["for"]("react.memo_cache_sentinel")?(u=h._(/*BTDS*/"Thi\u1ebfu l\u1ecbch s\u1eed chat."),b[9]=u):u=b[9];var v;b[10]!==g||b[11]!==e||b[12]!==j||b[13]!==f||b[14]!==r||b[15]!==s?(v=function(){j(!0),s(g?"RESTORE_THREAD_LIST_PERSISTENT_BANNER_CTA_CLICKED_INBOX":"RESTORE_THREAD_LIST_PERSISTENT_BANNER_CTA_CLICKED"),f({onDismissUpsell:e,source:r})},b[10]=g,b[11]=e,b[12]=j,b[13]=f,b[14]=r,b[15]=s,b[16]=v):v=b[16];var w;b[17]===Symbol["for"]("react.memo_cache_sentinel")?(w=h._(/*BTDS*/"Kh\u00f4i ph\u1ee5c ngay"),b[17]=w):w=b[17];b[18]!==v?(u=k.jsx(c("MWXText.react"),{color:"primary",type:"body4",children:k.jsxs(k.Fragment,{children:[u," ",k.jsx(c("MWXText.react"),{color:"blueLink",type:"bodyLink4",children:k.jsx(c("MWXLink.react"),{onClick:v,target:"_blank",testid:void 0,children:w})})]})}),b[18]=v,b[19]=u):u=b[19];b[20]!==a||b[21]!==u?(w=k.jsx("div",babelHelpers["extends"]({},t,{ref:a,children:u})),b[20]=a,b[21]=u,b[22]=w):w=b[22];return w}g["default"]=a}),226);
__d("MWEBThreadListPersistentBannerWrapper.react",["MWEncryptedBackupsDeferLocalStorageUpsell","MWEncryptedBackupsThreadListPersistentBanner.react","MWEncryptedBackupsThreadListQPWrapper.react","react","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(6),e=a.setHasDismissedBanner;a=a.trigger;var f=(h||(h=c("useReStore")))(),g;b[0]!==f||b[1]!==e?(g=j.jsx(c("MWEncryptedBackupsThreadListPersistentBanner.react"),{onDismissUpsell:function(){e(!0),d("MWEncryptedBackupsDeferLocalStorageUpsell").updateUpsellEntry({db:f,upsellType:d("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.PERSISTENT_BANNER_JEWEL})}}),b[0]=f,b[1]=e,b[2]=g):g=b[2];var i;b[3]!==g||b[4]!==a?(i=j.jsx(d("MWEncryptedBackupsThreadListQPWrapper.react").MWEncryptedBackupsThreadListQPWrapper,{trigger:a,children:g}),b[3]=g,b[4]=a,b[5]=i):i=b[5];return i}g["default"]=a}),98);
__d("MWEncryptedBackupsFetchBackupIds",["LSEncryptedBackupsBackupTenancy","LSFactory","LSFetchBackupIdsStoredProcedure","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return a.runInTransaction(function(a){return c("LSFetchBackupIdsStoredProcedure")(c("LSFactory")(a),{backupTenancy:(h||(h=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsBackupTenancy").PRODUCTION),isUiBlocking:!1})},"readwrite",void 0,void 0,f.id+":19")}g.encryptedBackupsFetchBackupIds=a}),98);
__d("MWEncryptedBackupsThreadListRestoreQPWrapper_query.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWEncryptedBackupsThreadListRestoreQPWrapper_query",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"MWEncryptedBackupsThreadListRestoreQPWrapper_viewer"}],storageKey:null}],type:"Query",abstractKey:null};e.exports=a}),null);
__d("MWEncryptedBackupsThreadListRestoreQPWrapper_viewer.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWEncryptedBackupsThreadListRestoreQPWrapper_viewer",selections:[{args:null,kind:"FragmentSpread",name:"MWEBRestoreQPWithPin_viewer"}],type:"Viewer",abstractKey:null};e.exports=a}),null);
__d("MWEncryptedBackupsVerifyDeviceNux.react",["fbt","EncryptedBackupsSupportedPlatformUtils","MAWEncryptedBackupsRestoreDialog.entrypoint","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsQPLSource.enum","MWEBVestaUserInfoContext.react","MWEBVirtualDevicesContext.react","MWEncryptedBackupsRetrieveQplLoggingAnnotations","MWJewelPopoverDialogContext.react","MWXQPCard.react","QPLUserFlow","getMWEBRestoreQPCautionCircleProperties","promiseDone","react","react-compiler-runtime","requireDeferred","useLabyrinthLogging","useMWXEntryPointDialog","useReStore","useVisibilityObserver"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));b=j;var l=b.useContext,m=b.useRef,n=c("requireDeferred")("mwEBCheckIfEBKeysExistInDisk").__setRef("MWEncryptedBackupsVerifyDeviceNux.react");function a(a){var b=d("react-compiler-runtime").c(46),e=a.children,f=a.currentSupportedPlatform,g=a.setClosed,j=a.setDismissed;a=d("MWEBVestaUserInfoContext.react").useMWEBIsCooldownOrLockOutState();var o;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(o={},b[0]=o):o=b[0];o=c("useMWXEntryPointDialog")(c("MAWEncryptedBackupsRestoreDialog.entrypoint"),o);var p=o[0],q=(i||(i=c("useReStore")))(),r=f!==d("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.FACEBOOK_DOT_COM,s=r?c("MWChatEncryptedBackupsQPLSource.enum").INBOX_THREADLIST_QP:c("MWChatEncryptedBackupsQPLSource.enum").JEWEL_THREADLIST_QP;o=d("useLabyrinthLogging").useLabyrinthLoggingFlow();var t=o.startFlow,u=m(!1);f=l(c("MWJewelPopoverDialogContext.react"));var v=f.setIsOpenForDialog;o=d("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices();f=o.virtualDeviceInfo;var w=f.vestaClientID!=null;o=f.offlineDevicesCount>0;var x=f.doesUserHaveOtcEligibleDevices;f=!w&&x;var y;b[1]!==q||b[2]!==x||b[3]!==w||b[4]!==s||b[5]!==t?(y=function(a){d("MWEncryptedBackupsRetrieveQplLoggingAnnotations").encryptedBackupsRetrieveQplLoggingAnnotations({db:q,onFetch:function(b){var e=b.ebsmWiped,f=b.firstUpsellTime,g=b.hasEbKeysLocally,h=b.hasEBSM,i=b.hasPDB,j=b.hasUserRestoredBefore;b=b.hasUserRestoredBeforeTemp;t({additionalAnnotations:{eb_session_identifier:f,ebsm_wiped:e,has_eb_keys_locally:g,has_ebsm:h,has_pdb:i,has_user_restored_before:j,has_user_restored_before_temp:b,is_otc_eligible:x.toString(),is_pin_set:w.toString(),restore_upsell_first_impression_time:f},event:d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,source:s});c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,a);u.current===!1&&(u.current=!0,c("promiseDone")(n.load(),function(a){return a(g)}))}})},b[1]=q,b[2]=x,b[3]=w,b[4]=s,b[5]=t,b[6]=y):y=b[6];var z=y;b[7]!==r||b[8]!==z?(y={onVisible:function(){var a=r?"VERIFY_DEVICE_INBOX_QP_THREAD_LIST_IMPRESSION":"VERIFY_DEVICE_QP_THREAD_LIST_IMPRESSION";z(a)}},b[7]=r,b[8]=z,b[9]=y):y=b[9];y=c("useVisibilityObserver")(y);var A;b[10]!==r||b[11]!==g||b[12]!==v||b[13]!==z?(A=function(){var a=r?"USER_CLICKED_INBOX_THREAD_LIST_VERIFY_DEVICE":"USER_CLICKED_FB_THREAD_LIST_VERIFY_DEVICE";z(a);v(!0);g()},b[10]=r,b[11]=g,b[12]=v,b[13]=z,b[14]=A):A=b[14];var B=A,C;b[15]!==r||b[16]!==g||b[17]!==j||b[18]!==z?(A=function(){var a=r?"USER_CLOSED_INBOX_THREAD_LIST_VERIFY_DEVICE_NUX":"USER_CLOSED_FB_THREAD_LIST_VERIFY_DEVICE_NUX";z(a);d("MWChatEncryptedBackupsLogging").cancelFlow({cancelEndPoint:"thread_list_nux",event:d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent});C()},C=function(){j(),g()},b[15]=r,b[16]=g,b[17]=j,b[18]=z,b[19]=A,b[20]=C):(A=b[19],C=b[20]);if(!w&&!o&&!x)return e;b[21]===Symbol["for"]("react.memo_cache_sentinel")?(o=h._(/*BTDS*/"Thi\u1ebfu l\u1ecbch s\u1eed chat"),b[21]=o):o=b[21];e=o;b[22]!==x||b[23]!==a||b[24]!==w||b[25]!==f?(o=a&&x?h._(/*BTDS*/"Kh\u00f4i ph\u1ee5c ngay"):w?h._(/*BTDS*/"Nh\u1eadp m\u00e3 PIN"):f?h._(/*BTDS*/"Kh\u00f4i ph\u1ee5c ngay"):h._(/*BTDS*/"Nh\u1eadp m\u00e3 g\u1ed3m 40 k\u00fd t\u1ef1"),b[22]=x,b[23]=a,b[24]=w,b[25]=f,b[26]=o):o=b[26];var D;b[27]!==C||b[28]!==B||b[29]!==s||b[30]!==p?(D=function(){B(),p({onDismissUpsell:C,source:s})},b[27]=C,b[28]=B,b[29]=s,b[30]=p,b[31]=D):D=b[31];var E;b[32]!==o||b[33]!==D?(E={label:o,onPress:D,testid:"mw-encrypted-backups-in-thread-verify-device-nux-verify-now-button"},b[32]=o,b[33]=D,b[34]=E):E=b[34];b[35]!==x||b[36]!==a||b[37]!==w||b[38]!==f?(o=a&&x?h._(/*BTDS*/"G\u1eedi m\u00e3 d\u00f9ng m\u1ed9t l\u1ea7n \u0111\u1ec3 kh\u00f4i ph\u1ee5c l\u1ecbch s\u1eed chat"):w?h._(/*BTDS*/"H\u00e3y nh\u1eadp m\u00e3 PIN \u0111\u1ec3 xem tin nh\u1eafn ch\u01b0a t\u1ea3i \u0111\u01b0\u1ee3c tr\u00ean thi\u1ebft b\u1ecb n\u00e0y."):f?h._(/*BTDS*/"G\u1eedi m\u00e3 d\u00f9ng m\u1ed9t l\u1ea7n \u0111\u1ec3 kh\u00f4i ph\u1ee5c l\u1ecbch s\u1eed chat"):h._(/*BTDS*/"H\u00e3y nh\u1eadp m\u00e3 g\u1ed3m 40 k\u00fd t\u1ef1 \u0111\u1ec3 xem tin nh\u1eafn ch\u01b0a t\u1ea3i \u0111\u01b0\u1ee3c tr\u00ean thi\u1ebft b\u1ecb n\u00e0y."),b[35]=x,b[36]=a,b[37]=w,b[38]=f,b[39]=o):o=b[39];b[40]===Symbol["for"]("react.memo_cache_sentinel")?(D={props:{src:c("getMWEBRestoreQPCautionCircleProperties")()},type:"image"},b[40]=D):D=b[40];b[41]!==A||b[42]!==y||b[43]!==E||b[44]!==o?(a=k.jsx(c("MWXQPCard.react"),{addOnPrimary:E,body:o,headline:e,icon:D,onClose:A,ref:y}),b[41]=A,b[42]=y,b[43]=E,b[44]=o,b[45]=a):a=b[45];return a}g["default"]=a}),226);
__d("MWEncryptedBackupsThreadListRestoreQPWrapper.react",["CometRelay","EncryptedBackupsSupportedPlatformUtils","MWEBEntrypointsKillswitch.enum","MWEBRestoreQPWithPin.react","MWEBVestaUserInfoContext.react","MWEBVirtualDevicesContext.react","MWEncryptedBackupsDeferLocalStorageUpsell","MWEncryptedBackupsThreadListPersistentBanner.react","MWEncryptedBackupsThreadListQPWrapper.react","MWEncryptedBackupsThreadListRestoreQPWrapper_query.graphql","MWEncryptedBackupsThreadListRestoreQPWrapper_viewer.graphql","MWEncryptedBackupsVerifyDeviceNux.react","react","react-compiler-runtime","useHasRestoreInterstitialSoftblockBeenDismissed","useMWEBBackupState","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=k||d("react");function m(a){var e=d("react-compiler-runtime").c(32),f=a.backupState,g=a.children,i=a.currentSupportedPlatform,k=a.fragmentKey,m=a.setHasDismissedQp,n=a.setHasDismissedQpWithPin;a=d("CometRelay").useFragment(h!==void 0?h:h=b("MWEncryptedBackupsThreadListRestoreQPWrapper_viewer.graphql"),k);var o=(j||(j=c("useReStore")))();k=d("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices();k=k.virtualDeviceInfo;var p=i===d("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.FACEBOOK_DOT_COM,q=k.doesUserHaveOtcEligibleDevices,r=d("MWEBVestaUserInfoContext.react").useMWEBIsCooldownOrLockOutState(),s;e[0]!==f||e[1]!==r?(s={backupState:f,isCooldownOrLockOutState:r},e[0]=f,e[1]=r,e[2]=s):s=e[2];f=c("useHasRestoreInterstitialSoftblockBeenDismissed")(s);if(!q&&r&&f)return null;else if(r&&f){e[3]!==m?(s=function(){m(!0)},e[3]=m,e[4]=s):s=e[4];e[5]!==o?(q=function(){return d("MWEncryptedBackupsDeferLocalStorageUpsell").updateUpsellEntry({db:o,upsellType:d("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.QP_JEWEL})},e[5]=o,e[6]=q):q=e[6];e[7]!==g||e[8]!==i||e[9]!==s||e[10]!==q?(r=l.jsx(c("MWEncryptedBackupsVerifyDeviceNux.react"),{children:g,currentSupportedPlatform:i,setClosed:s,setDismissed:q}),e[7]=g,e[8]=i,e[9]=s,e[10]=q,e[11]=r):r=e[11];return r}else if(p&&k.vestaClientID!=null&&c("MWEBRestoreQPWithPin.react")){e[12]!==n?(f=function(){n(!0)},e[12]=n,e[13]=f):f=e[13];e[14]!==o?(s=function(){return d("MWEncryptedBackupsDeferLocalStorageUpsell").updateUpsellEntry({db:o,upsellType:d("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.QP_WITH_PIN_JEWEL})},e[14]=o,e[15]=s):s=e[15];e[16]!==i||e[17]!==a||e[18]!==f||e[19]!==s||e[20]!==k.doesUserHaveOtcEligibleDevices||e[21]!==k.vestaClientID?(q=l.jsx(c("MWEBRestoreQPWithPin.react"),{clientID:k.vestaClientID,currentSupportedPlatform:i,doesUserHaveOtcEligibleDevices:k.doesUserHaveOtcEligibleDevices,fragmentKey:a,setClosed:f,setDismissed:s}),e[16]=i,e[17]=a,e[18]=f,e[19]=s,e[20]=k.doesUserHaveOtcEligibleDevices,e[21]=k.vestaClientID,e[22]=q):q=e[22];return q}else{e[23]!==m?(r=function(){m(!0)},e[23]=m,e[24]=r):r=e[24];e[25]!==o?(p=function(){return d("MWEncryptedBackupsDeferLocalStorageUpsell").updateUpsellEntry({db:o,upsellType:d("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.QP_JEWEL})},e[25]=o,e[26]=p):p=e[26];e[27]!==g||e[28]!==i||e[29]!==r||e[30]!==p?(a=l.jsx(c("MWEncryptedBackupsVerifyDeviceNux.react"),{children:g,currentSupportedPlatform:i,setClosed:r,setDismissed:p}),e[27]=g,e[28]=i,e[29]=r,e[30]=p,e[31]=a):a=e[31];return a}}function a(a){var e=d("react-compiler-runtime").c(12),f=a.children,g=a.currentSupportedPlatform,h=a.fragmentKey,k=a.hasDismissedQps,n=a.setHasDismissedBanner,o=a.setHasDismissedQp,p=a.setHasDismissedQpWithPin;a=a.trigger;h=d("CometRelay").useFragment(i!==void 0?i:i=b("MWEncryptedBackupsThreadListRestoreQPWrapper_query.graphql"),h);var q=(j||(j=c("useReStore")))(),r;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(r={entrypoint:c("MWEBEntrypointsKillswitch.enum").INBOX_THREADLIST},e[0]=r):r=e[0];r=c("useMWEBBackupState")(r);var s;e[1]!==r||e[2]!==f||e[3]!==g||e[4]!==(h==null?void 0:h.viewer)||e[5]!==q||e[6]!==k||e[7]!==n||e[8]!==o||e[9]!==p||e[10]!==a?(s=k?l.jsx(d("MWEncryptedBackupsThreadListQPWrapper.react").MWEncryptedBackupsThreadListQPWrapper,{trigger:a,children:l.jsx(c("MWEncryptedBackupsThreadListPersistentBanner.react"),{onDismissUpsell:function(){n(!0),d("MWEncryptedBackupsDeferLocalStorageUpsell").updateUpsellEntry({db:q,upsellType:d("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.PERSISTENT_BANNER_JEWEL})}})}):l.jsx(d("MWEncryptedBackupsThreadListQPWrapper.react").MWEncryptedBackupsThreadListQPWrapper,{trigger:a,children:l.jsx(m,{backupState:r,children:f,currentSupportedPlatform:g,fragmentKey:h==null?void 0:h.viewer,setHasDismissedQp:o,setHasDismissedQpWithPin:p})}),e[1]=r,e[2]=f,e[3]=g,e[4]=h==null?void 0:h.viewer,e[5]=q,e[6]=k,e[7]=n,e[8]=o,e[9]=p,e[10]=a,e[11]=s):s=e[11];return s}g["default"]=a}),98);
__d("MWXIconMobile",["MWXSvgIcon","SVGIcon","cr:22406","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:22406")),c("gkx")("23219"));g["default"]=a}),98);
__d("VestaServerGraphQLLoginProviderBeginLoginMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9747954008656745"}),null);
__d("VestaServerGraphQLLoginProviderBeginLoginMutation.graphql",["VestaServerGraphQLLoginProviderBeginLoginMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"begin_login_request",variableName:"input"}],concreteType:"VestaBeginLoginResponse",kind:"LinkedField",name:"fbid_based_auth_layer_vesta_begin_login",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_opaque_l2",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_opaque_l2_sig",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"VestaServerGraphQLLoginProviderBeginLoginMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"VestaServerGraphQLLoginProviderBeginLoginMutation",selections:c},params:{id:b("VestaServerGraphQLLoginProviderBeginLoginMutation_facebookRelayOperation"),metadata:{},name:"VestaServerGraphQLLoginProviderBeginLoginMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("VestaServerGraphQLLoginProviderFinishLoginMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9611648865601020"}),null);
__d("VestaServerGraphQLLoginProviderFinishLoginMutation.graphql",["VestaServerGraphQLLoginProviderFinishLoginMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"finish_login_request",variableName:"input"}],concreteType:"VestaFinishLoginResponse",kind:"LinkedField",name:"fbid_based_auth_layer_vesta_finish_login",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_login_payload",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"login_success",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"attempts_remaining",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"VestaServerGraphQLLoginProviderFinishLoginMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"VestaServerGraphQLLoginProviderFinishLoginMutation",selections:c},params:{id:b("VestaServerGraphQLLoginProviderFinishLoginMutation_facebookRelayOperation"),metadata:{},name:"VestaServerGraphQLLoginProviderFinishLoginMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("VestaServerGraphQLLoginProviderInitQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9285801411531503"}),null);
__d("VestaServerGraphQLLoginProviderInitQuery.graphql",["VestaServerGraphQLLoginProviderInitQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"request"}],c=[{alias:null,args:[{kind:"Variable",name:"vesta_init_request",variableName:"request"}],concreteType:"VestaInitIqResponse",kind:"LinkedField",name:"fbid_based_auth_layer_vesta_login_init",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_island_rsa_pub",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_island_rsa_pub_signature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_opaque_pub",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_opaque_pub_signature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_island_ed25519_pub",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_island_ed25519_pub_signature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_registered",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"attempts_remaining",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"VestaServerGraphQLLoginProviderInitQuery",selections:c,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"VestaServerGraphQLLoginProviderInitQuery",selections:c},params:{id:b("VestaServerGraphQLLoginProviderInitQuery_facebookRelayOperation"),metadata:{},name:"VestaServerGraphQLLoginProviderInitQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("VestaServerGraphQLLoginProvider",["E2EEBackupUtil","Promise","RelayHooks","RelayModern","VestaServerGraphQLLoginProviderBeginLoginMutation.graphql","VestaServerGraphQLLoginProviderFinishLoginMutation.graphql","VestaServerGraphQLLoginProviderInitQuery.graphql","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function a(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){c=c.environment;c=(yield d("RelayHooks").fetchQuery(c,h!==void 0?h:h=b("VestaServerGraphQLLoginProviderInitQuery.graphql"),{request:{fbid:a.clientId,product_use_case:a.productUseCase,vesta_client_api_version:6}}).toPromise());a=c==null?void 0:c.fbid_based_auth_layer_vesta_login_init;c=a==null?void 0:a.base64url_encoded_island_rsa_pub;var e=a==null?void 0:a.base64url_encoded_island_rsa_pub_signature,f=a==null?void 0:a.base64url_encoded_opaque_pub,g=a==null?void 0:a.base64url_encoded_opaque_pub_signature,i=a==null?void 0:a.base64url_encoded_island_ed25519_pub,j=a==null?void 0:a.base64url_encoded_island_ed25519_pub_signature,k=a==null?void 0:a.is_registered;a=a==null?void 0:a.attempts_remaining;if(c!=null&&e!=null&&f!=null&&g!=null&&i!=null&&j!=null&&k!=null){var l;return{islandRsaPub:(l=d("E2EEBackupUtil")).decodeBase64Url(c),islandRsaPubSig:l.decodeBase64Url(e),opaquePub:l.decodeBase64Url(f),opaquePubSig:l.decodeBase64Url(g),islandEd25519Pub:l.decodeBase64Url(i),islandEd25519PubSig:l.decodeBase64Url(j),isRegistered:k,loginAttemptsRemaining:a}}throw new Error("GraphQL Response is Null")});return l.apply(this,arguments)}function c(a,c){var e=c.environment,f=i!==void 0?i:i=b("VestaServerGraphQLLoginProviderBeginLoginMutation.graphql"),g={input:{fbid:a.clientId,product_use_case:a.productUseCase,base64url_encoded_opaque_l1:d("E2EEBackupUtil").encodeBase64Url(a.opaqueL1)}};return new(k||(k=b("Promise")))(function(a,b){d("RelayModern").commitMutation(e,{mutation:f,variables:g,onCompleted:function(c){c=c.fbid_based_auth_layer_vesta_begin_login;var e=c==null?void 0:c.base64url_encoded_opaque_l2;c=c==null?void 0:c.base64url_encoded_opaque_l2_sig;if(e!=null&&c!=null){a({opaqueL2:d("E2EEBackupUtil").decodeBase64Url(e),opaqueL2Sig:d("E2EEBackupUtil").decodeBase64Url(c)});return}b(new Error("GraphQL Response is Null"))},onError:function(a){b(a)}})})}function e(a,c){var e=c.environment,f=c.updater;return new(k||(k=b("Promise")))(function(c,g){d("RelayModern").commitMutation(e,{mutation:j!==void 0?j:j=b("VestaServerGraphQLLoginProviderFinishLoginMutation.graphql"),variables:{input:{fbid:a.clientId,product_use_case:a.productUseCase,base64url_encoded_opaque_l3:d("E2EEBackupUtil").encodeBase64Url(a.opaqueL3)}},onCompleted:function(a){a=a.fbid_based_auth_layer_vesta_finish_login;var b=a==null?void 0:a.base64url_encoded_login_payload,e=a==null?void 0:a.login_success;a=a==null?void 0:a.attempts_remaining;if(e!=null){c({loginSuccess:e,loginPayload:b==null?b:d("E2EEBackupUtil").decodeBase64Url(b),attemptsRemaining:a});return}g(new Error("GraphQL Response is Null"))},onError:function(a){g(a)},updater:f})})}g.initLogin=a;g.beginLogin=c;g.finishLogin=e}),98);
__d("mwEBAddDevice",["EBSMAPI","MAWCurrentUser","cr:21222"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var e=a.environment,f=a.onFailure,g=a.onInvalidRecoveryCode,h=a.onStart,i=a.onSuccess,j=a.recoveryCode,k=a.storage,l=a.traceId,m=a.trackAddingDevice;a=a.trackOverprompting;return c("EBSMAPI").addDeviceWithRecoveryCode({environment:e,isInWorker:!1,onFailure:f,onInvalidRecoveryCode:g,onStart:h,onSuccess:i,recoveryCode:j,storage:k,traceId:l,trackAddingDevice:m,trackOverprompting:a,userId:d("MAWCurrentUser").getID()}).then(function(){b("cr:21222")==null||b("cr:21222").fireAndForget("backend","addDeviceWithPinInWorker",{recoveryCode:j,userId:d("MAWCurrentUser").getID()})})}g.EBAddDevice=a}),98);
__d("vestaBackupSecretRestore",["Promise","asyncToGeneratorRuntime","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("E2EEBackupSecretRestoreModule").__setRef("vestaBackupSecretRestore"),j=c("requireDeferred")("VestaServerGraphQLLoginProvider").__setRef("vestaBackupSecretRestore");function a(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=a.input;a=a.environment;var d=(yield (h||(h=b("Promise"))).all([j.load(),i.load()])),e=d[0],f=e.beginLogin,g=e.finishLogin;e=e.initLogin;d=d[1].restoreBackupSecret;return d({beginLogin:f,finishLogin:g,initLogin:e},c,{environment:a})});return k.apply(this,arguments)}g["default"]=a}),98);
__d("mwEBGetPINSecretFromVesta",["CometRelay","E2EEBackupCommon","FBLogger","LSDataTraceCheckPoint","LSDataTraceType","LSIntEnum","MAWTraceUtils","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsSettingsDialogQuery.graphql","MWEBODSEntityKey.enum","MWEBODSEntityName.enum","QPLUserFlow","asyncToGeneratorRuntime","promiseDone","vestaBackupSecretRestore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.addDevice,e=a.clientID,f=a.environment,g=a.getSourceFromContext,i=a.onSubmitPin,j=a.onSubmitPinFailure,k=a.onVestaSecretFetch,l=a.pinCode,m=a.productUseCase,n=a.setIsInProgress,o=a.setIsPinCodeIncorrect,p=a.setIsVestaError;a=a.startFlow;var q=d("MAWTraceUtils").startNewTrace((h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").SAP_VESTA_LOGIN),d("MAWTraceUtils").CONTEXT_VESTA_LOGIN);n(!0);i==null||i();i=g();c("QPLUserFlow").addAnnotations(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,{string:{restore_type:"pin_code",source:i}});g=new TextDecoder();var r;a({additionalAnnotations:{device_type:"HSM"},event:d("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,odsEntityName:c("MWEBODSEntityName.enum").MW_EB_PIN_RESTORE_AUTH,source:i});try{c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,"vesta_login_begin"),c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"PIN_CODE_RESTORE_SUBMIT"),d("MAWTraceUtils").recordCheckpointForTrace(q,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").SAP_VESTA_CALLING_VESTA_LOGIN),[],!1),r=g.decode(yield c("vestaBackupSecretRestore")({environment:f,input:{clientId:e,productUseCase:m,vestaAccountPin:l}})),c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,"vesta_login_success"),d("MAWTraceUtils").recordCheckpointForTrace(q,h.ofNumber(c("LSDataTraceCheckPoint").SAP_VESTA_LOGIN_COMPLETION),[],!1)}catch(b){j==null||j();c("promiseDone")(d("CometRelay").fetchQuery(f,c("MWChatEncryptedBackupsSettingsDialogQuery.graphql"),{}).toPromise());if(b.errorType===d("E2EEBackupCommon").BackupErrorType.INVALID_PASSWORD)n(!1),o(!0),d("MWChatEncryptedBackupsLogging").endFailure({errorName:"incorrect_pin_code",event:d("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,odsEntityKey:c("MWEBODSEntityKey.enum").INCORRECT_PIN_CODE,odsEntityName:c("MWEBODSEntityName.enum").MW_EB_PIN_RESTORE_AUTH}),c("QPLUserFlow").markError(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"incorrect_pin_code"),d("MAWTraceUtils").recordFailureAndFlushForTraceId(q,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_PIN_RESTORE_FAILURE),[],"Incorrect pin code");else{d("MWChatEncryptedBackupsLogging").endFailure({annotations:{string:{errorMessage:b.message,errorType:b.errorType}},errorName:"vesta_login_failure",event:d("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,odsEntityName:c("MWEBODSEntityName.enum").MW_EB_PIN_RESTORE_AUTH});c("QPLUserFlow").markError(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"pin_code_error");n(!1);p(!0);a="Error when restoring using PIN: "+b;c("FBLogger")("labyrinth_web").mustfix(a);d("MAWTraceUtils").recordFailureAndFlushForTraceId(q,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_PIN_RESTORE_FAILURE),[],b.toString())}throw b}r!=null&&(d("MAWTraceUtils").recordCheckpointForTrace(q,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_PLUGIN_CALLING_ADD_DEVICE),[],!1),k==null||k(),c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,"add_device_begin"),b(r,q,l))});return i.apply(this,arguments)}g["default"]=a}),98);
__d("updateUpsellsStateInRelayStore",["CometRelay","FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.environment,e=a.updateValue;d("CometRelay").commitLocalUpdate(b,function(a){a=a.getRoot().getLinkedRecord("viewer");if(a==null){c("FBLogger")("labyrinth_web").mustfix("[labyrinth][upsells] A viewer record does not exist when updating upsell state.");return}a.setValue(e,"is_eb_restore_upsells_dismissed")})}g["default"]=a}),98);
__d("useMWEBSetHasSeenNoticeMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9618790408209960"}),null);
__d("useMWEBSetHasSeenNoticeMutation.graphql",["useMWEBSetHasSeenNoticeMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{alias:null,args:null,concreteType:"SetHasSeenEbAutoRestoreNoticeResponsePayload",kind:"LinkedField",name:"set_has_seen_eb_auto_restore_notice",plural:!1,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useMWEBSetHasSeenNoticeMutation",selections:a,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"useMWEBSetHasSeenNoticeMutation",selections:a},params:{id:b("useMWEBSetHasSeenNoticeMutation_facebookRelayOperation"),metadata:{},name:"useMWEBSetHasSeenNoticeMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("useMWEBSetHasSeenNotice",["CometRelay","react","react-compiler-runtime","useMWEBSetHasSeenNoticeMutation.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(i||d("react")).useCallback;function a(){var a=d("react-compiler-runtime").c(3),c;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(c=h!==void 0?h:h=b("useMWEBSetHasSeenNoticeMutation.graphql"),a[0]=c):c=a[0];c=d("CometRelay").useMutation(c);var e=c[0];a[1]!==e?(c=function(){e({variables:{}})},a[1]=e,a[2]=c):c=a[2];return c}g["default"]=a}),98);
__d("useMWEBAutoRestoreNoticeDialog",["JSResourceForInteraction","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWEBUseLocalStorage","MWEncryptedBackupsLocalStorageEntryEnum","QPLUserFlow","ReQL","ReQLSuspense","react","react-compiler-runtime","useLabyrinthLogging","useMWEBSetHasSeenNotice","useMWXLazyDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(i||d("react")).useCallback;var j=c("JSResourceForInteraction")("MWEBAutoRestoreNoticeDialog.react").__setRef("useMWEBAutoRestoreNoticeDialog");function a(){var a=d("react-compiler-runtime").c(9),b=d("useLabyrinthLogging").useLabyrinthLoggingFlow(),e=b.startFlow;b=c("useMWXLazyDialog")(j);var g=b[0],i=(h||(h=c("useReStore")))();a[0]!==i.tables.auto_restore_opt_out?(b=function(){return d("ReQL").fromTableAscending(i.tables.auto_restore_opt_out)},a[0]=i.tables.auto_restore_opt_out,a[1]=b):b=a[1];var l;a[2]!==i?(l=[i],a[2]=i,a[3]=l):l=a[3];var m=d("ReQLSuspense").useArray(b,l,f.id+":45"),n=c("useMWEBSetHasSeenNotice")();a[4]!==m||a[5]!==n||a[6]!==g||a[7]!==e?(b=function(a){var b=a.hasSeenNotice;a=a.source;var f=m.filter(k).length>0;e({event:d("MWChatEncryptedBackupsQPLEvents").restoreWithAutoRestoreConsentQplEvent,source:a});if(f){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreWithAutoRestoreConsentQplEvent,"AUTO_RESTORE_NOTICE_SCREEN_OPTED_OUT");d("MWChatEncryptedBackupsLogging").endSuccess({event:d("MWChatEncryptedBackupsQPLEvents").restoreWithAutoRestoreConsentQplEvent});return}c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreWithAutoRestoreConsentQplEvent,"AUTO_RESTORE_NOTICE_SCREEN_OPTED_IN");d("MWEBUseLocalStorage").mwEBCreateLocalStorageEntry(c("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_REMEMBER_BROWSER_CONSENT);if(b){d("MWChatEncryptedBackupsLogging").endSuccess({event:d("MWChatEncryptedBackupsQPLEvents").restoreWithAutoRestoreConsentQplEvent});return}n();g({})},a[4]=m,a[5]=n,a[6]=g,a[7]=e,a[8]=b):b=a[8];return b}function k(a){return a.optOutKey===c("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_OPTED_OUT_OF_AUTO_RESTORE}g["default"]=a}),98);